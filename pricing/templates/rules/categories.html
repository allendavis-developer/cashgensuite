{% extends "base.html" %}
{% block title %}Categories{% endblock %}

{% block content %}
<h2 style="margin-bottom: 16px;">Categories</h2>

<a href="{% url 'add_category' %}" class="btn">+ Add Category</a>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Base Margin</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for category in categories %}
    <tr>
      <td>{{ category.name }}</td>
      <td>{{ category.base_margin|floatformat:2 }}</td>
      <td><a href="{% url 'manage_category' category.id %}">[Manage]</a></td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="3" style="text-align:center; color:#777;">No categories yet.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>


<!-- Global Rules Section -->
<h2 style="margin: 32px 0 16px 0;">Global Margin Rules</h2>

<table>
  <thead>
    <tr>
      <th>TYPE</th>
      <th>MATCH VALUE</th>
      <th>ADJUSTMENT</th>
      <th>ACTIVE</th>
      <th>ACTIONS</th>
    </tr>
  </thead>
  <tbody>
    {% for rule in global_rules %}
    <tr>
      <td>{{ rule.get_rule_type_display }}</td>
      <td>{{ rule.match_value }}</td>
      <td>{% if rule.adjustment >= 0 %}+{% endif %}{{ rule.adjustment|floatformat:3 }}</td>
      <td>{% if rule.is_active %}Yes{% else %}No{% endif %}</td>
      <td>
        <a href="{% url 'edit_global_rule' rule.id %}" class="btn">âœŽ</a>
        <a href="{% url 'delete_global_rule' rule.id %}" class="btn" style="background:#660000">X</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" style="text-align:center; color:#777;">No global rules yet.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div style="margin-top:16px;">
  <a href="{% url 'add_global_rule' %}" class="btn">+ Add Global Rule</a>
</div>
{% endblock %}
