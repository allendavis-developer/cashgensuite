{% extends "base.html" %}
{% block title %}Category Detail{% endblock %}

{% block content %}
<!-- Category Header -->
<div style="display:flex; justify-content: space-between; align-items:center; margin-bottom:16px;">
    <h2>{{ category.name }} (Base Margin: {{ category.base_margin|floatformat:2 }})</h2>
    <div>
        <a href="{% url 'edit_category' category.id %}" class="btn">[Edit]</a>
        <a href="{% url 'delete_category' category.id %}" class="btn-delete" style="background:#660000">[X]</a>
    </div>
</div>

<!-- Rules Table -->
<h3>Rules</h3>
<table>
    <thead>
        <tr>
            <th>TYPE</th>
            <th>MATCH VALUE</th>
            <th>ADJUSTMENT</th>
            <th>ACTIVE</th>
            <th>ACTIONS</th>
        </tr>
    </thead>
    <tbody>
        {% for rule in rules %}
        <tr>
            <td>{{ rule.get_rule_type_display }}</td>
            <td>{{ rule.match_value }}</td>
            <td>{% if rule.adjustment >= 0 %}+{% endif %}{{ rule.adjustment|floatformat:3 }}</td>
            <td>{% if rule.is_active %}Yes{% else %}No{% endif %}</td>
            <td>
                <a href="{% url 'edit_rule' rule.id %}" class="btn">âœŽ</a>
                <a href="{% url 'delete_rule' rule.id %}" class="btn-delete" style="background:#660000">X</a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" style="text-align:center; color:#777;">No rules yet.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Add Rule Button -->
<div style="margin-top:16px;">
    <a href="{% url 'add_rule' category.id %}" class="btn">+ Add Rule</a>
</div>
{% endblock %}
